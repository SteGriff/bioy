<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bible in One Year</title>
    <link id="favicon" rel="icon" href="https://cdn.glitch.com/790441d4-1159-414a-a8fd-e5c6d6c38320%2Ffavicon.ico?1536058635841" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="96x96" href="https://cdn.glitch.com/790441d4-1159-414a-a8fd-e5c6d6c38320%2Fandroid-icon-96x96.png?1536058815480">
    <link rel="icon" type="image/png" sizes="192x192"  href="https://cdn.glitch.com/790441d4-1159-414a-a8fd-e5c6d6c38320%2Fandroid-icon-192x192.png?1536058886431">
    <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.glitch.com/790441d4-1159-414a-a8fd-e5c6d6c38320%2Fapple-icon-180x180.png?1536058820261">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/tachyons.css">
    <link rel="stylesheet" href="/style.css">    
    
  </head>
  <body>
    <div id="app">
      
    <main>
    <header class="w-100 bb bw1 b--black-60 pa2">
      <form class="js-form w-100 flex-ns">
        <span class="mt3 mh2">
          {{message}}
        </span>
        <input type="text" placeholder="username" name="username" v-model="username"
               v-if="!loggedIn"
               class="mv1 ma2-ns h2 b--black-60 black-80 bw1 ba" />

        <input type="password" placeholder="password" name="password" v-model="password"
               v-if="!loggedIn"
               class="mv1 ma2-ns h2 b--black-60 black-80 bw1 ba" />

        <button type="button" v-on:click.prevent="getNotes()"
                v-if="!loggedIn"
                class="mv1 ma2-ns h2 w-100 w4-ns b--black-60 black-80 bg-white bw1 ba b pointer">
            Login
        </button>

        <button type="button" v-on:click.prevent="createUser()"
                v-if="!loggedIn"
                class="mv1 ma2-ns h2 w-100 w4-ns b--black-60 black-80 bg-white bw1 ba b pointer">
            Register
        </button>
        
        <button type="button" v-on:click.prevent="logout()"
                v-if="loggedIn"
                class="mv1 ma2-ns h2 w-100 w4-ns b--black-60 black-80 bg-white bw1 ba b pointer">
            Logout
        </button>

        <button type="button" v-on:click.prevent="getNotes()"
                v-if="loggedIn"
                class="mv1 ma2-ns h2 w-100 w5-ns b--black-60 black-80 bg-white bw1 ba b pointer">
            Refresh Notes
          
        </button>
      </form>
    </header>
    <header class="ma2 ma3-ns">
      <h1>
        Bible in One Year <span class="f6 gray">(via <a href="http://bible.soulsurvivor.com/">Soul Survivor</a>)</span>
      </h1>
    </header>

      <br>
      
      <table cellspacing="0" class="w-100 mw8 center">
        <thead>
          <th class="tl pa1 pa2-ns"><small>Day</small></th>
          <th class="tl pa1 pa2-ns">OT</th>
          <th class="tl pa1 pa2-ns">NT</th>
          <th class="tl pa1 pa2-ns">PP</th>
          <th class="tl pa1 pa2-ns" v-if="loggedIn">‚úÖ</th>
        </thead>
        <tbody>
          <tr class="stripe-dark" v-for="(reading, index) in readings">
            <td class="pa1 pa2-ns">{{reading.Day}}</td>
            <td class="pa1 pa2-ns">{{reading.OT}}</td>
            <td class="pa1 pa2-ns">{{reading.NT}}</td>
            <td class="pa1 pa2-ns">{{reading.PP}}</td>
            <td class="pa1 pa2-ns" v-if="loggedIn">
              <span v-if="!reading.Done">üîú</span>
              <span v-if="reading.Done">‚úÖ</span>
              <a class="pointer" v-if="loggedIn" v-on:click="openModal(reading)">üìù</a>
              <p class="f6 mb0 mt1" v-if="loggedIn && reading.GeneralNote">
                {{truncate(reading.GeneralNote)}}
              </p>
            </td>
          </tr>
        </tbody>
      </table>
      
      <p>
        üòÉüìî <a href="https://glitch.com/~bioy">Made on Glitch by Ste</a>
      </p>
       
      <p class="f6">
        <strong>JSON API</strong> (for nerds): <a href="https://bioy.glitch.me/getReadings">https://bioy.glitch.me/getReadings</a>
      </p>
    </main>

    <div class="z-0
	    bg-gray o-50
	    fixed absolute--fill
	    t-0 l-0"
         v-if="modal"
         v-on:click="closeModal()"
         >
    </div>

    <div class="z-1
		b--black-80 black-80 bg-white bw1 ba
		fixed t-50 l-50 translate-center w-90 w-50-ns
		ma2 pv1 ph2 ph3-ns"
         v-if="modal"
         >

        <span class="fr f3 pointer" v-on:click="closeModal()">&times;</span>

        <div class="center pv2">
            <form>
                <fieldset class="ba b--transparent ph0 mh0">
                    <legend class="f4 fw6">{{summary(activeReading)}}</legend>
                    <div class="mt3">
                        <label class="db fw6 lh-copy f6" for="email-address">Notes</label>
                        <textarea class="pa2 input-reset ba bg-transparent w-100"
                               v-model="activeReading.GeneralNote" name="note"></textarea>
                    </div>
                  <div class="mt3">
                    <input type="checkbox" name="done" id="done" class="dib w2"
                      v-model="activeReading.Done">
                    <label for="done">Tick when you've read it</label>
                  </div>
                </fieldset>
                <div>
                    <button class="b ph3 pv2 input-reset
                      b--black-80 black-80 bg-white bw1 ba
                      pointer dib"
                            v-on:click.prevent="saveNote()">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    </div>
    
    <script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="vue-local-storage.js"></script>
    <script src="/client.js"></script>
    
  </body>
</html>
